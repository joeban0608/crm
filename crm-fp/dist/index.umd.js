(function(e,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.CRMFingerprint={}))})(this,function(e){"use strict";var x=Object.defineProperty;var d=e=>{throw TypeError(e)};var S=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var h=(e,t,n)=>S(e,typeof t!="symbol"?t+"":t,n),y=(e,t,n)=>t.has(e)||d("Cannot "+n);var i=(e,t,n)=>(y(e,t,"read from private field"),n?n.call(e):t.get(e)),p=(e,t,n)=>t.has(e)?d("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),g=(e,t,n,o)=>(y(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n);var s,l;const t=()=>navigator.userAgent;class n{constructor(){h(this,"name","Canvas Feature");h(this,"enabled",!0);p(this,s,null);p(this,l,null)}async support(){return document?(g(this,s,document.createElement("canvas").getContext("2d")),i(this,s)!==null):!1}async data(){return i(this,s)===null?null:(i(this,s).textBaseline="top",i(this,s).font="14px 'Arial'",i(this,s).textBaseline="alphabetic",i(this,s).fillStyle="#f60",i(this,s).fillRect(100,1,55,20),i(this,s).fillStyle="#069",i(this,s).fillText("Cyber Universe Canvas",2,15),i(this,s).fillStyle="rgba(102, 204, 0, 0.7)",i(this,s).fillText("Cyber Universe Canvas",4,17),g(this,l,i(this,s).canvas.toDataURL()),{fingerprint:await o(i(this,l)),info:{image:i(this,l)}})}}s=new WeakMap,l=new WeakMap;const o=async r=>{const u=new TextEncoder().encode(r),c=await crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(c)).map(a=>a.toString(16).padStart(2,"0")).join("")},m=async r=>r.enabled?await r.support()?await r.data():(console.log(`Feature ${r.name} is not supported`),null):(console.log(`Feature ${r.name} is disabled`),null),b=async()=>{var c;const r=[new n],u=[];for(const f of r){const a=await m(f);console.log(f.name,a==null?void 0:a.fingerprint),console.log((c=a==null?void 0:a.info)==null?void 0:c.image),u.push((a==null?void 0:a.fingerprint)||"")}return await o(JSON.stringify(u))},v=t(),w=async()=>{const r={useragent:v,id:await b()};return console.log("fp",r),r};e.fpPromise=w,e.hash=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
