(function(e,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.CRMFingerprint={}))})(this,function(e){"use strict";var X=Object.defineProperty;var H=e=>{throw TypeError(e)};var Y=(e,t,o)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var b=(e,t,o)=>Y(e,typeof t!="symbol"?t+"":t,o),J=(e,t,o)=>t.has(e)||H("Cannot "+o);var i=(e,t,o)=>(J(e,t,"read from private field"),o?o.call(e):t.get(e)),d=(e,t,o)=>t.has(e)?H("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,o),S=(e,t,o,R)=>(J(e,t,"write to private field"),R?R.call(e,o):t.set(e,o),o),M=(e,t,o)=>(J(e,t,"access private method"),o);var w,x,T,A,$,k,c,F,m,O;function t(h){function n(l,f){return l>>>f|l<<32-f}const g=new TextEncoder().encode(h),r=Array.from(g),u=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],C=r.length*8;for(r.push(128);(r.length*8+64)%512!==0;)r.push(0);const v=new Array(8).fill(0);for(let l=0;l<8;l++)v[7-l]=C>>>l*8&255;r.push(...v);const N=[];for(let l=0;l<r.length;l+=64)N.push(r.slice(l,l+64));return N.forEach(l=>{const f=new Array(64);for(let s=0;s<16;s++)f[s]=l[s*4]<<24|l[s*4+1]<<16|l[s*4+2]<<8|l[s*4+3];for(let s=16;s<64;s++){const U=n(f[s-15],7)^n(f[s-15],18)^f[s-15]>>>3,I=n(f[s-2],17)^n(f[s-2],19)^f[s-2]>>>10;f[s]=f[s-16]+U+f[s-7]+I|0}let[p,D,L,B,y,E,j,P]=a;for(let s=0;s<64;s++){const U=n(y,6)^n(y,11)^n(y,25),I=y&E^~y&j,V=P+U+I+u[s]+f[s]|0,z=n(p,2)^n(p,13)^n(p,22),Q=p&D^p&L^D&L,W=z+Q|0;P=j,j=E,E=y,y=B+V|0,B=L,L=D,D=p,p=V+W|0}a[0]=a[0]+p|0,a[1]=a[1]+D|0,a[2]=a[2]+L|0,a[3]=a[3]+B|0,a[4]=a[4]+y|0,a[5]=a[5]+E|0,a[6]=a[6]+j|0,a[7]=a[7]+P|0}),a.map(l=>(l>>>0).toString(16).padStart(8,"0")).join("")}class o{constructor(){d(this,A);b(this,"name","Audio Feature");b(this,"enabled",!0);d(this,w,null);d(this,x,null);d(this,T,5e3)}async support(){const n=window.OfflineAudioContext||window.webkitOfflineAudioContext;return n?(S(this,w,new n(1,i(this,T),44100)),i(this,w)!==null):!1}async data(){if(i(this,w)===null)return null;const n=await M(this,A,$).call(this,i(this,w));return n===null?null:(S(this,x,await t(n.toString())),{fingerprint:i(this,x),info:{audio:n}})}}w=new WeakMap,x=new WeakMap,T=new WeakMap,A=new WeakSet,$=function(n){return new Promise(g=>{const r=n.createOscillator();r.type="triangle",r.frequency.value=1e4;const u=n.createDynamicsCompressor();u.threshold.value=-50,u.knee.value=40,u.ratio.value=12,u.attack.value=0,u.release.value=.2,r.connect(u),u.connect(n.destination),r.start(),n.oncomplete=a=>{const C=a.renderedBuffer.getChannelData(0),v=M(this,A,k).call(this,C);g(v)},n.startRendering()})},k=function(n){let g=0;for(let r=0;r<n.length;++r)g+=Math.abs(n[r]);return g};class R{constructor(){b(this,"name","Canvas Feature");b(this,"enabled",!0);d(this,c,null);d(this,F,null)}async support(){return document?(S(this,c,document.createElement("canvas").getContext("2d")),i(this,c)!==null):!1}async data(){return i(this,c)===null?null:(i(this,c).textBaseline="top",i(this,c).font="14px 'Arial'",i(this,c).textBaseline="alphabetic",i(this,c).fillStyle="#f60",i(this,c).fillRect(100,1,55,20),i(this,c).fillStyle="#069",i(this,c).fillText("Cyber Universe Canvas",2,15),i(this,c).fillStyle="rgba(102, 204, 0, 0.7)",i(this,c).fillText("Cyber Universe Canvas",4,17),S(this,F,i(this,c).canvas.toDataURL()),{fingerprint:await t(i(this,F)),info:{image:i(this,F)}})}}c=new WeakMap,F=new WeakMap;class q{constructor(){b(this,"name","Languages Feature");b(this,"enabled",!0);d(this,m,[]);d(this,O,null)}async support(){return!!navigator}async data(){return navigator.language&&i(this,m).push([navigator.language]),Array.isArray(navigator.languages)&&i(this,m).push(navigator.languages),S(this,O,JSON.stringify(i(this,m))),{fingerprint:await t(i(this,O)),info:{languages:JSON.stringify(i(this,m))}}}}m=new WeakMap,O=new WeakMap;const G=async h=>h.enabled?await h.support()?await h.data():(console.log(`Feature ${h.name} is not supported`),null):(console.log(`Feature ${h.name} is disabled`),null),K=async()=>await _(),_=async()=>{const h=[new R,new o,new q],n=[],g={},r=(u,a,C)=>{var v;(v=u==null?void 0:u.info)!=null&&v[C]&&(g[a]={hash:u.fingerprint,value:u.info[C]})};for(const u of h){const a=await G(u);r(a,"canvas","image"),r(a,"audio","audio"),r(a,"languages","languages"),n.push((a==null?void 0:a.fingerprint)||"")}return{id:await t(JSON.stringify(n)),useragent:navigator.userAgent,rawData:g}};e.fpPromise=K,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
