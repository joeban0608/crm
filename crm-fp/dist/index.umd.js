(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.CRMFingerprint={}))})(this,function(t){"use strict";var q=Object.defineProperty;var L=t=>{throw TypeError(t)};var z=(t,e,i)=>e in t?q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var T=(t,e,i)=>z(t,typeof e!="symbol"?e+"":e,i),P=(t,e,i)=>e.has(t)||L("Cannot "+i);var l=(t,e,i)=>(P(t,e,"read from private field"),i?i.call(t):e.get(t)),j=(t,e,i)=>e.has(t)?L("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),E=(t,e,i,b)=>(P(t,e,"write to private field"),b?b.call(t,i):e.set(t,i),i);var r,d;const e=()=>navigator.userAgent;function i(c){function f(s,a){return s>>>a|s<<32-a}const w=new TextEncoder().encode(c),h=Array.from(w),u=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],H=h.length*8;for(h.push(128);(h.length*8+64)%512!==0;)h.push(0);const R=new Array(8).fill(0);for(let s=0;s<8;s++)R[7-s]=H>>>s*8&255;h.push(...R);const U=[];for(let s=0;s<h.length;s+=64)U.push(h.slice(s,s+64));return U.forEach(s=>{const a=new Array(64);for(let n=0;n<16;n++)a[n]=s[n*4]<<24|s[n*4+1]<<16|s[n*4+2]<<8|s[n*4+3];for(let n=16;n<64;n++){const A=f(a[n-15],7)^f(a[n-15],18)^a[n-15]>>>3,F=f(a[n-2],17)^f(a[n-2],19)^a[n-2]>>>10;a[n]=a[n-16]+A+a[n-7]+F|0}let[p,y,m,v,g,x,S,C]=o;for(let n=0;n<64;n++){const A=f(g,6)^f(g,11)^f(g,25),F=g&x^~g&S,B=C+A+F+u[n]+a[n]|0,J=f(p,2)^f(p,13)^f(p,22),K=p&y^p&m^y&m,N=J+K|0;C=S,S=x,x=g,g=v+B|0,v=m,m=y,y=p,p=B+N|0}o[0]=o[0]+p|0,o[1]=o[1]+y|0,o[2]=o[2]+m|0,o[3]=o[3]+v|0,o[4]=o[4]+g|0,o[5]=o[5]+x|0,o[6]=o[6]+S|0,o[7]=o[7]+C|0}),o.map(s=>(s>>>0).toString(16).padStart(8,"0")).join("")}class b{constructor(){T(this,"name","Canvas Feature");T(this,"enabled",!0);j(this,r,null);j(this,d,null)}async support(){return document?(E(this,r,document.createElement("canvas").getContext("2d")),l(this,r)!==null):!1}async data(){return l(this,r)===null?null:(l(this,r).textBaseline="top",l(this,r).font="14px 'Arial'",l(this,r).textBaseline="alphabetic",l(this,r).fillStyle="#f60",l(this,r).fillRect(100,1,55,20),l(this,r).fillStyle="#069",l(this,r).fillText("Cyber Universe Canvas",2,15),l(this,r).fillStyle="rgba(102, 204, 0, 0.7)",l(this,r).fillText("Cyber Universe Canvas",4,17),E(this,d,l(this,r).canvas.toDataURL()),{fingerprint:await i(l(this,d)),info:{image:l(this,d)}})}}r=new WeakMap,d=new WeakMap;const M=async c=>c.enabled?await c.support()?await c.data():(console.log(`Feature ${c.name} is not supported`),null):(console.log(`Feature ${c.name} is disabled`),null),O=async()=>{var w;const c=[new b],f=[];for(const h of c){const u=await M(h);console.log(h.name,u==null?void 0:u.fingerprint),console.log((w=u==null?void 0:u.info)==null?void 0:w.image),f.push((u==null?void 0:u.fingerprint)||"")}return await i(JSON.stringify(f))},$=e(),D=async()=>{const c={useragent:$,id:await O()};return console.log("fp",c),c};t.fpPromise=D,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
