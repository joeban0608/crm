(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.CRMFingerprint={}))})(this,function(t){"use strict";var J=Object.defineProperty;var U=t=>{throw TypeError(t)};var K=(t,e,r)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var E=(t,e,r)=>K(t,typeof e!="symbol"?e+"":e,r),I=(t,e,r)=>e.has(t)||U("Cannot "+r);var a=(t,e,r)=>(I(t,e,"read from private field"),r?r.call(t):e.get(t)),R=(t,e,r)=>e.has(t)?U("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),B=(t,e,r,b)=>(I(t,e,"write to private field"),b?b.call(t,r):e.set(t,r),r);var l,m;function e(u){function c(i,f){return i>>>f|i<<32-f}const w=new TextEncoder().encode(u),h=Array.from(w),v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],x=h.length*8;for(h.push(128);(h.length*8+64)%512!==0;)h.push(0);const o=new Array(8).fill(0);for(let i=0;i<8;i++)o[7-i]=x>>>i*8&255;h.push(...o);const L=[];for(let i=0;i<h.length;i+=64)L.push(h.slice(i,i+64));return L.forEach(i=>{const f=new Array(64);for(let n=0;n<16;n++)f[n]=i[n*4]<<24|i[n*4+1]<<16|i[n*4+2]<<8|i[n*4+3];for(let n=16;n<64;n++){const T=c(f[n-15],7)^c(f[n-15],18)^f[n-15]>>>3,j=c(f[n-2],17)^c(f[n-2],19)^f[n-2]>>>10;f[n]=f[n-16]+T+f[n-7]+j|0}let[p,d,y,C,g,S,F,A]=s;for(let n=0;n<64;n++){const T=c(g,6)^c(g,11)^c(g,25),j=g&S^~g&F,P=A+T+j+v[n]+f[n]|0,$=c(p,2)^c(p,13)^c(p,22),D=p&d^p&y^d&y,H=$+D|0;A=F,F=S,S=g,g=C+P|0,C=y,y=d,d=p,p=P+H|0}s[0]=s[0]+p|0,s[1]=s[1]+d|0,s[2]=s[2]+y|0,s[3]=s[3]+C|0,s[4]=s[4]+g|0,s[5]=s[5]+S|0,s[6]=s[6]+F|0,s[7]=s[7]+A|0}),s.map(i=>(i>>>0).toString(16).padStart(8,"0")).join("")}class r{constructor(){E(this,"name","Canvas Feature");E(this,"enabled",!0);R(this,l,null);R(this,m,null)}async support(){return document?(B(this,l,document.createElement("canvas").getContext("2d")),a(this,l)!==null):!1}async data(){return a(this,l)===null?null:(a(this,l).textBaseline="top",a(this,l).font="14px 'Arial'",a(this,l).textBaseline="alphabetic",a(this,l).fillStyle="#f60",a(this,l).fillRect(100,1,55,20),a(this,l).fillStyle="#069",a(this,l).fillText("Cyber Universe Canvas",2,15),a(this,l).fillStyle="rgba(102, 204, 0, 0.7)",a(this,l).fillText("Cyber Universe Canvas",4,17),B(this,m,a(this,l).canvas.toDataURL()),{fingerprint:await e(a(this,m)),info:{image:a(this,m)}})}}l=new WeakMap,m=new WeakMap;const b=async u=>u.enabled?await u.support()?await u.data():(console.log(`Feature ${u.name} is not supported`),null):(console.log(`Feature ${u.name} is disabled`),null),M=async()=>{const u=await O();return console.log("fpFeatureInfo",u),{useragent:navigator.userAgent,...u}},O=async()=>{var h,v,s;const u=[new r];let c="";const w=[];for(const x of u){const o=await b(x);console.log(x.name,o==null?void 0:o.fingerprint),console.log((h=o==null?void 0:o.info)==null?void 0:h.image),(v=o==null?void 0:o.info)!=null&&v.image&&(c=(s=o==null?void 0:o.info)==null?void 0:s.image),w.push((o==null?void 0:o.fingerprint)||"")}return{id:await e(JSON.stringify(w)),canvas:{image:c}}};t.fpPromise=M,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
